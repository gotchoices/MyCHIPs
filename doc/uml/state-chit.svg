<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1069px" preserveAspectRatio="none" style="width:1003px;height:1069px;background:#FFFFFF;" version="1.1" viewBox="0 0 1003 1069" width="1003px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="27.6094" id="_title" style="stroke:none;stroke-width:1.0;" width="132" x="428.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="122" x="433.5" y="24.5332">Direct Chit States</text><!--MD5=[4b4fcc21959b44b7293758900907bb92]
cluster good--><g id="cluster_good"><path d="M83.5,752.6094 L616.5,752.6094 A12.5,12.5 0 0 1 629,765.1094 L629,809.1172 L71,809.1172 L71,765.1094 A12.5,12.5 0 0 1 83.5,752.6094 " fill="#E8E8EA" style="stroke:#E8E8EA;stroke-width:1.0;"/><rect fill="none" height="172" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="558" x="71" y="752.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="71" x2="629" y1="809.1172" y2="809.1172"/><line style="stroke:#202024;stroke-width:0.5;" x1="71" x2="629" y1="776.4453" y2="776.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="24" x="272" y="768.0283">good</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="61" x="76" y="790.3643">Status: good</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="156" x="76" y="804.2002">Commence consensus algorithm</text></g><g id="good.lGood"><rect fill="#E8E8EA" height="61.5078" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="169" x="114.5" y="832.1094"/><line style="stroke:#202024;stroke-width:0.5;" x1="114.5" x2="283.5" y1="855.9453" y2="855.9453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="113" x="142.5" y="848.5283">L.good (and Hold.good)</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="149" x="119.5" y="872.3643">Liability: Peer has been notified</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="108" x="119.5" y="886.2002">Status: good, Req: null</text></g><g id="good.aGood"><rect fill="#E8E8EA" height="75.3438" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="170" x="435" y="825.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="435" x2="605" y1="849.4453" y2="849.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="113" x="463.5" y="842.0283">A.good (and Part.good)</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="150" x="440" y="865.8643">Asset: Peer has agreed/signed</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="108" x="440" y="879.7002">Status: good, Req: null</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="59" x="440" y="893.5361">User: Notice</text></g><g id="good.liftGood"><rect fill="#E8E8EA" height="75.3438" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="81" x="318.5" y="825.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="318.5" x2="399.5" y1="849.4453" y2="849.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="42" x="338" y="842.0283">Lift.good</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="41" x="323.5" y="865.8643">Type: lift</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="61" x="323.5" y="879.7002">Status: good</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="59" x="323.5" y="893.5361">User: Notice</text></g><g id="tRepair"><rect fill="#E8E8EA" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="57" x="570.5" y="229.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="570.5" x2="627.5" y1="253.4453" y2="253.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="37" x="580.5" y="246.0283">T.repair</text></g><g id="lRejected"><rect fill="#E8E8EA" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="143" x="842.5" y="415.1094"/><line style="stroke:#202024;stroke-width:0.5;" x1="842.5" x2="985.5" y1="438.9453" y2="438.9453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="48" x="890" y="431.5283">L.rejected</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="123" x="847.5" y="455.3643">Status: rejected, Req: null</text></g><g id="lPendGood"><rect fill="#E8E8EA" height="75.3438" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="187" x="13.5" y="580.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="13.5" x2="200.5" y1="604.4453" y2="604.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="167" x="23.5" y="597.0283">L.pend.good (and Hold.pend.good)</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="157" x="18.5" y="620.8643">Liability: User has agreed/signed</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="116" x="18.5" y="634.7002">Status: pend, Req: good</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="80" x="18.5" y="648.5361">Agent: Attention!</text></g><g id="lPend"><rect fill="#E8E8EA" height="75.3438" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="174" x="113" y="402.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="113" x2="287" y1="426.4453" y2="426.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="33" x="183.5" y="419.0283">L.pend</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="154" x="118" y="442.8643">Liability: Open invoice from peer</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="108" x="118" y="456.7002">Status: pend, Req: null</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="74" x="118" y="470.5361">User: Attention!</text></g><g id="lPendVoid"><rect fill="#E8E8EA" height="75.3438" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="146" x="19" y="45.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="19" x2="165" y1="69.4453" y2="69.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="56" x="64" y="62.0283">L.pend.void</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="126" x="24" y="85.8643">Liability: User has refused</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="112" x="24" y="99.7002">Status: pend, Req: void</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="80" x="24" y="113.5361">Agent: Attention!</text></g><g id="lVoid"><rect fill="#E8E8EA" height="61.5078" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="169" x="195.5" y="223.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="195.5" x2="364.5" y1="247.4453" y2="247.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="29" x="265.5" y="240.0283">L.void</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="149" x="200.5" y="263.8643">Liability: Peer has been notified</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="104" x="200.5" y="277.7002">Status: void, Req: null</text></g><g id="aDraftPend"><rect fill="#E8E8EA" height="75.3438" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="157" x="650.5" y="402.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="650.5" x2="807.5" y1="426.4453" y2="426.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="61" x="698.5" y="419.0283">A.draft.pend</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="137" x="655.5" y="442.8643">Asset: User invoicing a peer</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="115" x="655.5" y="456.7002">Status: draft, Req: pend</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="80" x="655.5" y="470.5361">Agent: Attention!</text></g><g id="aPend"><rect fill="#E8E8EA" height="75.3438" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="168" x="682" y="580.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="682" x2="850" y1="604.4453" y2="604.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="35" x="748.5" y="597.0283">A.pend</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="148" x="687" y="620.8643">Asset: Peer has been invoiced</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="108" x="687" y="634.7002">Status: pend, Req: null</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="142" x="687" y="648.5361">User: Notice, waiting for peer</text></g><g id="aVoid"><rect fill="#E8E8EA" height="75.3438" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="139" x="786.5" y="825.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="786.5" x2="925.5" y1="849.4453" y2="849.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="31" x="840.5" y="842.0283">A.void</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="119" x="791.5" y="865.8643">Asset: Peer has refused</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="104" x="791.5" y="879.7002">Status: void, Req: null</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="59" x="791.5" y="893.5361">User: Notice</text></g><g id="liftPend"><rect fill="#E8E8EA" height="61.5078" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="81" x="235.5" y="587.1094"/><line style="stroke:#202024;stroke-width:0.5;" x1="235.5" x2="316.5" y1="610.9453" y2="610.9453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="42" x="255" y="603.5283">Lift.pend</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="41" x="240.5" y="627.3643">Type: lift</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="61" x="240.5" y="641.2002">Status: pend</text></g><g id="liftVoid"><rect fill="#E8E8EA" height="61.5078" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="77" x="391.5" y="587.1094"/><line style="stroke:#202024;stroke-width:0.5;" x1="391.5" x2="468.5" y1="610.9453" y2="610.9453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="38" x="411" y="603.5283">Lift.void</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="41" x="396.5" y="627.3643">Type: lift</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="57" x="396.5" y="641.2002">Status: void</text></g><g id="linked"><rect fill="#E8E8EA" height="50" rx="12.5" ry="12.5" style="stroke:#202024;stroke-width:0.5;" width="144" x="7" y="993.6094"/><line style="stroke:#202024;stroke-width:0.5;" x1="7" x2="151" y1="1017.4453" y2="1017.4453"/><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="27" x="65.5" y="1010.0283">linked</text><text fill="#000033" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="124" x="12" y="1033.8643">Chit linked into hash chain</text></g><ellipse cx="484" cy="440.1094" fill="#222222" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><!--MD5=[07ea15f91487f41bc77bde87e98238da]
link *start to aDraftPend--><g id="link_*start_aDraftPend"><path d="M494.22,440.1094 C519.8,440.1094 588.62,440.1094 645.18,440.1094 " fill="none" id="*start-to-aDraftPend" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="650.26,440.1094,641.26,436.1094,645.26,440.1094,641.26,444.1094,650.26,440.1094" style="stroke:#008000;stroke-width:1.0;"/><text fill="#008000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="559.25" y="406.5283">User:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="84" x="530.25" y="420.3643">Creates draft chit</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="64" x="540.25" y="434.2002">value --&gt; self</text></g><!--MD5=[4b99f0e1c1e928393068947fbea4091b]
reverse link lPend to *start--><g id="link_lPend_*start"><path d="M292.39,440.1094 C360.08,440.1094 444.97,440.1094 473.85,440.1094 " fill="none" id="lPend-backto-*start" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="287.14,440.1094,296.14,444.1094,292.14,440.1094,296.14,436.1094,287.14,440.1094" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="25" x="368" y="392.5283">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="76" x="342.5" y="406.3643">Receive invoice</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="62" x="349.5" y="420.2002">[Acked Tally]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="106" x="327.5" y="434.0361">/Act:pend; Notify user</text></g><!--MD5=[2963acda2303010518536e3f5084eb02]
reverse link tRepair to *start--><g id="link_tRepair_*start"><path d="M593.76,284.8094 C588.29,309.6994 577.93,345.6494 560,372.6094 C541.36,400.6394 507.93,424.0294 492.38,433.9694 " fill="none" id="tRepair-backto-*start" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="594.86,279.6694,589.0741,287.6396,593.8192,284.5598,596.8989,289.3049,594.86,279.6694" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="25" x="635.5" y="328.0283">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="76" x="610" y="341.8643">Receive invoice</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="126" x="585" y="355.7002">[Missing or unAcked Tally]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="103" x="596.5" y="369.5361">/Request Act:get tally</text></g><!--MD5=[816b9799574588d9edb8070c92a365c4]
link *start to lPendGood--><g id="link_*start_lPendGood"><path d="M473.73,442.1394 C440.26,445.8794 332.15,461.1094 258,507.6094 C236.14,521.3194 238.98,534.2894 219,550.6094 C207.2,560.2494 193.85,569.4194 180.59,577.7094 " fill="none" id="*start-to-lPendGood" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="176.1,580.4794,185.8593,579.1545,180.3544,577.8525,181.6564,572.3475,176.1,580.4794" style="stroke:#008000;stroke-width:1.0;"/><text fill="#008000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="292.5" y="520.0283">User:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="93" x="259" y="533.8643">Creates signed chit</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="71" x="270" y="547.7002">value-&gt;partner</text></g><!--MD5=[c3a296c6ebf754e81617c30c76ace1e1]
link *start to aGood--><g id="link_*start_aGood"><path d="M487.25,449.9994 C491.7,462.6094 499.53,486.5194 503,507.6094 C521.43,619.5994 522.14,753.9594 521.09,820.5194 " fill="none" id="*start-to-aGood" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="521,825.5894,525.1537,816.6593,521.0857,820.5901,517.1549,816.5221,521,825.5894" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="25" x="558.5" y="595.0283">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="89" x="526.5" y="608.8643">Receive asset chit</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="66" x="538" y="622.7002">value-&gt;holder</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="78" x="532" y="636.5361">[Valid signature]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="106" x="518" y="650.3721">/Act:good; Notify user</text></g><!--MD5=[1a6dbbe2a46578cf8cca29e906250955]
link tRepair to lPend--><g id="link_tRepair_lPend"><path d="M570.2,255.5194 C520.96,256.7894 419.55,265.8094 354,315.6094 C330.87,333.1894 342.67,352.1994 322,372.6094 C311.67,382.8094 299.45,391.8994 286.8,399.8194 " fill="none" id="tRepair-to-lPend" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="282.5,402.4594,292.2645,401.1728,286.7646,399.8492,288.0883,394.3494,282.5,402.4594" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="25" x="440.5" y="328.0283">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="61" x="422.5" y="341.8643">Receive tally</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="58" x="424" y="355.7002">[Valid Acks]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="196" x="355" y="369.5361">/Reconstruct Tally; Act:pend; Notify user</text></g><!--MD5=[6e1698448a0f8525ed8b973a12f6cece]
link tRepair to lRejected--><g id="link_tRepair_lRejected"><path d="M627.81,268.8294 C652.61,280.4594 689.16,298.2094 720,315.6094 C774.64,346.4294 835.28,385.9394 873.98,411.8594 " fill="none" id="tRepair-to-lRejected" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="878.59,414.9494,873.3401,406.6164,874.4363,412.166,868.8867,413.2622,878.59,414.9494" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="25" x="873" y="328.0283">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="61" x="855" y="341.8643">Receive tally</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="64" x="853.5" y="355.7002">[Invalid Acks]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="147" x="812" y="369.5361">/Transmit Reject Act:reject chit</text></g><!--MD5=[effcd3c0c17cd551be62c103a4a41ee6]
link aDraftPend to aPend--><g id="link_aDraftPend_aPend"><path d="M736.76,478.0094 C742.75,506.4994 751.03,545.9194 757.26,575.5294 " fill="none" id="aDraftPend-to-aPend" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="758.32,580.5694,760.3801,570.9384,757.2899,575.6766,752.5517,572.5865,758.32,580.5694" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="54" x="789" y="520.0283">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="91" x="770.5" y="533.8643">Req:pend detected</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="128" x="752" y="547.7002">/Transmit invoice Act:pend</text></g><!--MD5=[12542876fadba40b8891060154299542]
link aPend to aVoid--><g id="link_aPend_aVoid"><path d="M771.72,655.7294 C775.66,677.2994 781.69,704.9194 790,728.6094 C801.29,760.7794 818.46,795.2294 832.46,821.0794 " fill="none" id="aPend-to-aVoid" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="834.85,825.4794,834.0631,815.662,832.4608,821.0872,827.0356,819.4848,834.85,825.4794" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="25" x="829.5" y="698.0283">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="76" x="804" y="711.8643">Receive refusal</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="102" x="791" y="725.7002">/Act:void; Notify user</text></g><!--MD5=[5dee0530a8862cc7225cca4f09b16653]
link aVoid to aDraftPend--><g id="link_aVoid_aDraftPend"><path d="M873.73,825.4494 C904.34,756.3094 957.52,604.8794 889,507.6094 C886.37,503.8694 850.17,488.6994 812.87,473.7794 " fill="none" id="aVoid-to-aDraftPend" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="807.84,471.7794,814.7107,478.8358,812.4824,473.6363,817.6819,471.408,807.84,471.7794" style="stroke:#008000;stroke-width:1.0;"/><text fill="#008000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="946" y="609.0283">User:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="60" x="929" y="622.8643">Modifies chit</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="72" x="923" y="636.7002">Requests draft</text></g><!--MD5=[87d89b07b80ece2afd0c4adf6eb9981a]
link aPend to aGood--><g id="link_aPend_aGood"><path d="M701.49,655.7394 C687.85,664.7294 673.97,674.8794 662,685.6094 C616.42,726.4894 573.77,782.9194 547.33,820.8694 " fill="none" id="aPend-to-aGood" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="544.19,825.3994,552.597,820.2689,547.0323,821.2858,546.0154,815.7212,544.19,825.3994" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="25" x="703.5" y="698.0283">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="99" x="666.5" y="711.8643">Receive acceptance</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="106" x="663" y="725.7002">/Act:good; Notify user</text></g><!--MD5=[e3370df3816487b93cedbb1bc93ae951]
reverse link lPendVoid to lPend--><g id="link_lPendVoid_lPend"><path d="M80.78,125.8694 C71.63,167.5194 62.9,232.7294 81,285.6094 C96.61,331.2294 131.91,373.7794 160.04,402.4594 " fill="none" id="lPendVoid-backto-lPend" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="81.9,120.9094,76.0159,128.8073,80.7987,125.7866,83.8194,130.5694,81.9,120.9094" style="stroke:#008000;stroke-width:1.0;"/><text fill="#008000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="116.5" y="252.5283">User:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="95" x="82" y="266.3643">Requests to decline</text></g><!--MD5=[8a08566b369321204377310226f63ed4]
link lPendVoid to lVoid--><g id="link_lPendVoid_lVoid"><path d="M132.79,120.8894 C165.48,150.3594 210.97,191.3694 242.7,219.9794 " fill="none" id="lPendVoid-to-lVoid" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="246.5,223.4094,242.5053,214.407,242.7906,220.0567,237.141,220.342,246.5,223.4094" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="54" x="245" y="163.0283">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="87" x="228.5" y="176.8643">Req:void detected</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="124" x="210" y="190.7002">/Transmit refusal Act:void</text></g><!--MD5=[98212adcfc97a0d038088661c0d6eb54]
link lVoid to lPend--><g id="link_lVoid_lPend"><path d="M222.88,285.6994 C212.45,293.9394 202.99,303.8894 197,315.6094 C184.24,340.5694 185.3,372.2394 189.38,397.2494 " fill="none" id="lVoid-to-lPend" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="190.29,402.4894,192.6888,392.9371,189.4333,397.5633,184.8071,394.3078,190.29,402.4894" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#0000FF" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="25" x="245" y="328.0283">Peer:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="119" x="198" y="341.8643">Receive modified invoice</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="78" x="218.5" y="355.7002">[Valid signature]</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="106" x="204.5" y="369.5361">/Act:pend; Notify user</text></g><!--MD5=[c51b89918b4e3d471837861b0f6a22f5]
link lPend to lPendGood--><g id="link_lPend_lPendGood"><path d="M180.5,478.0094 C165.39,506.6094 144.44,546.2494 128.78,575.8994 " fill="none" id="lPend-to-lPendGood" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="126.31,580.5694,134.0471,574.4753,128.6429,576.147,126.9712,570.7427,126.31,580.5694" style="stroke:#008000;stroke-width:1.0;"/><text fill="#008000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="26" x="176.5" y="527.0283">User:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="47" x="166" y="540.8643">Signs chit</text></g><!--MD5=[3d6d4f5d365ce6195a51dc49003bd112]
link lPendGood to lGood--><g id="link_lPendGood_lGood"><path d="M116.42,656.0194 C122.23,677.4494 130.23,704.8294 139,728.6094 C151.63,762.8694 168.99,800.7194 181.78,827.3494 " fill="none" id="lPendGood-to-lGood" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="183.96,831.8594,183.6512,822.0154,181.7871,827.3562,176.4462,825.4921,183.96,831.8594" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="54" x="188.5" y="698.0283">DB Trigger:</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="91" x="170" y="711.8643">Req:good detected</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="151" x="140" y="725.7002">/Transmit acceptance Act:good</text></g><!--MD5=[0bab2828177c4c80b97c192374e02c1e]
link good to linked--><g id="link_good_linked"><path d="M79,925.0343 C79,925.2413 79,925.4485 79,925.6558 C79,927.3142 79,928.9825 79,930.6575 C79,937.3571 79,944.1623 79,950.8641 C79,964.2675 79,977.2569 79,988.1594 " fill="none" id="good-to-linked" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="79,993.2994,83,984.2994,79,988.2994,75,984.2994,79,993.2994" style="stroke:#000000;stroke-width:1.0;"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="134" x="80" y="961.0283">[When consensus reached]</text></g><!--MD5=[7fa3e0d1a40a696b9499be011d3df376]
link *start to liftPend--><g id="link_*start_liftPend"><path d="M476.93,447.6894 C458.31,464.9594 406.21,512.8594 361,550.6094 C347.84,561.5994 333.22,573.2294 319.87,583.6394 " fill="none" id="*start-to-liftPend" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="315.77,586.8294,325.3281,584.4541,319.7145,583.7567,320.4119,578.143,315.77,586.8294" style="stroke:#000000;stroke-width:1.0;"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="85" x="409" y="527.0283">System proposes</text><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="73" x="415" y="540.8643">or agrees to lift</text></g><!--MD5=[7a916cf8312d31b6324108ef5e83ce7a]
link liftPend to liftVoid--><g id="link_liftPend_liftVoid"><path d="M316.86,618.1094 C338.23,618.1094 364.4,618.1094 386.18,618.1094 " fill="none" id="liftPend-to-liftVoid" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="391.33,618.1094,382.33,614.1094,386.33,618.1094,382.33,622.1094,391.33,618.1094" style="stroke:#000000;stroke-width:1.0;"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="38" x="335" y="612.5283">Lift fails</text></g><!--MD5=[7626a8914d40baa2528604ca28e1bfb6]
link liftPend to liftGood--><g id="link_liftPend_liftGood"><path d="M286.34,649.3894 C301.09,692.5694 328.21,771.9494 344.82,820.5894 " fill="none" id="liftPend-to-liftGood" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="346.49,825.4794,347.3678,815.6697,344.8746,820.7475,339.7968,818.2544,346.49,825.4794" style="stroke:#000000;stroke-width:1.0;"/><text fill="#333333" font-family="Helvetica" font-size="11" lengthAdjust="spacing" textLength="66" x="313" y="712.0283">Lift committed</text></g><rect fill="#FFFFFF" height="12.5781" style="stroke:none;stroke-width:1.0;" width="152" x="418.5" y="1048.6094"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="152" x="418.5" y="1058.9902">Tue Oct 17 10:08:02 MDT 2023</text><!--MD5=[c004165e1fc2134d933634caf3654062]
@startuml
!include common.puml

$title(Direct Chit States)
state "T.repair" as tRepair
state "L.rejected" as lRejected
state "L.pend.good (and Hold.pend.good)" as lPendGood
state "L.pend" as lPend
state "L.pend.void" as lPendVoid
state "L.void" as lVoid
state "A.draft.pend" as aDraftPend
state "A.pend" as aPend
state "A.void" as aVoid
state "Lift.pend" as liftPend
state "Lift.void" as liftVoid
state good {
  state "L.good (and Hold.good)" as lGood
  state "A.good (and Part.good)" as aGood
  state "Lift.good" as liftGood
}

'State details:
lRejected: Status: rejected, Req: null

lPend: Liability: Open invoice from peer
lPend: Status: pend, Req: null
lPend: User: Attention!

lPendVoid: Liability: User has refused
lPendVoid: Status: pend, Req: void
lPendVoid: Agent: Attention!

lVoid: Liability: Peer has been notified
lVoid: Status: void, Req: null

lPendGood: Liability: User has agreed/signed
lPendGood: Status: pend, Req: good
lPendGood: Agent: Attention!

lGood : Liability: Peer has been notified
lGood : Status: good, Req: null

aDraftPend: Asset: User invoicing a peer
aDraftPend: Status: draft, Req: pend
aDraftPend: Agent: Attention!

aPend: Asset: Peer has been invoiced
aPend: Status: pend, Req: null
aPend: User: Notice, waiting for peer

aVoid : Asset: Peer has refused
aVoid : Status: void, Req: null
aVoid : User: Notice

aGood : Asset: Peer has agreed/signed
aGood : Status: good, Req: null
aGood : User: Notice

good : Status: good
good : Commence consensus algorithm
linked : Chit linked into hash chain

liftPend : Type: lift\nStatus: pend
liftGood : Type: lift\nStatus: good
liftGood : User: Notice
liftVoid : Type: lift\nStatus: void
'liftLink : Type: lift\nStatus: good

'State transition rules:
[*] -right[$user]-> aDraftPend : $trans($user,Creates draft chit\nvalue - -> self)
[*] -left[$peer]-> lPend : $trans($peer,Receive invoice,Acked Tally,Act:pend; Notify user)
[*] -left[$peer]-> tRepair : $trans($peer,Receive invoice,Missing or unAcked Tally,Request Act:get tally)
[*] -[$user]-> lPendGood : $trans($user,Creates signed chit\nvalue->partner)
[*] -[$peer]-> aGood : $trans($peer,Receive asset chit\nvalue->holder, Valid signature, Act:good; Notify user)

tRepair -[$peer]-> lPend : $trans($peer,Receive tally,Valid Acks,Reconstruct Tally; Act:pend; Notify user)
tRepair -[$peer]-> lRejected : $trans($peer,Receive tally,Invalid Acks,Transmit Reject Act:reject chit)
aDraftPend -[$db]-> aPend : $trans($db,Req:pend detected,'',Transmit invoice Act:pend)
'aPend - -> aDraftPend : $trans(Timeout,No reply from peer)
aPend -[$peer]-> aVoid : $trans($peer,Receive refusal,'',Act:void; Notify user)
aVoid -[$user]-> aDraftPend : $trans($user,Modifies chit\nRequests draft,'')
aPend -[$peer]-> aGood : $trans($peer,Receive acceptance,'',Act:good; Notify user)

lPend -up[$user]-> lPendVoid : $trans($user, Requests to decline)
lPendVoid -[$db]-> lVoid : $trans($db, Req:void detected, '', Transmit refusal Act:void)
lVoid -[$peer]-> lPend : $trans($peer,Receive modified invoice,Valid signature,Act:pend; Notify user)

lPend -[$user]-> lPendGood : $trans($user, Signs chit)
lPendGood -[$db]-> lGood : $trans($db, Req:good detected,'', Transmit acceptance Act:good)

good - -> linked : [When consensus reached]

[*] -right-> liftPend : System proposes\nor agrees to lift
liftPend -right-> liftVoid : Lift fails
liftPend - -> liftGood : Lift committed
'liftGood - -> liftLink : Lift chit linked

@enduml

@startuml



skinparam backgroundColor fff
skinparam stereotypeCBackgroundColor 27d






skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Helvetica
}

skinparam class {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}

skinparam actor {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor cccccc
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam interface {
    backgroundColor 4af
  borderColor 27d
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}



skinparam queue {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 4af
  lifeLineBackgroundColor e0e0e0
}




skinparam state {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Helvetica
  arrowFontColor 333
  arrowFontSize 11
  startColor 4af
  endColor 27d
}

skinparam note {
    backgroundColor e8e8ea
  borderColor 202024
    fontColor 003
  fontName Helvetica
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}








  title Direct Chit States
  footer Tue Oct 17 10:08:02 MDT 2023
state "T.repair" as tRepair
state "L.rejected" as lRejected
state "L.pend.good (and Hold.pend.good)" as lPendGood
state "L.pend" as lPend
state "L.pend.void" as lPendVoid
state "L.void" as lVoid
state "A.draft.pend" as aDraftPend
state "A.pend" as aPend
state "A.void" as aVoid
state "Lift.pend" as liftPend
state "Lift.void" as liftVoid
state good {
  state "L.good (and Hold.good)" as lGood
  state "A.good (and Part.good)" as aGood
  state "Lift.good" as liftGood
}

lRejected: Status: rejected, Req: null

lPend: Liability: Open invoice from peer
lPend: Status: pend, Req: null
lPend: User: Attention!

lPendVoid: Liability: User has refused
lPendVoid: Status: pend, Req: void
lPendVoid: Agent: Attention!

lVoid: Liability: Peer has been notified
lVoid: Status: void, Req: null

lPendGood: Liability: User has agreed/signed
lPendGood: Status: pend, Req: good
lPendGood: Agent: Attention!

lGood : Liability: Peer has been notified
lGood : Status: good, Req: null

aDraftPend: Asset: User invoicing a peer
aDraftPend: Status: draft, Req: pend
aDraftPend: Agent: Attention!

aPend: Asset: Peer has been invoiced
aPend: Status: pend, Req: null
aPend: User: Notice, waiting for peer

aVoid : Asset: Peer has refused
aVoid : Status: void, Req: null
aVoid : User: Notice

aGood : Asset: Peer has agreed/signed
aGood : Status: good, Req: null
aGood : User: Notice

good : Status: good
good : Commence consensus algorithm
linked : Chit linked into hash chain

liftPend : Type: lift\nStatus: pend
liftGood : Type: lift\nStatus: good
liftGood : User: Notice
liftVoid : Type: lift\nStatus: void

[*] -right[#green]-> aDraftPend : <font color=green>User:\nCreates draft chit\nvalue - -> self
[*] -left[#blue]-> lPend : <font color=blue>Peer:\nReceive invoice\n[Acked Tally]\n/Act:pend; Notify user
[*] -left[#blue]-> tRepair : <font color=blue>Peer:\nReceive invoice\n[Missing or unAcked Tally]\n/Request Act:get tally
[*] -[#green]-> lPendGood : <font color=green>User:\nCreates signed chit\nvalue->partner
[*] -[#blue]-> aGood : <font color=blue>Peer:\nReceive asset chit\nvalue->holder\n[Valid signature]\n/Act:good; Notify user

tRepair -[#blue]-> lPend : <font color=blue>Peer:\nReceive tally\n[Valid Acks]\n/Reconstruct Tally; Act:pend; Notify user
tRepair -[#blue]-> lRejected : <font color=blue>Peer:\nReceive tally\n[Invalid Acks]\n/Transmit Reject Act:reject chit
aDraftPend -[#red]-> aPend : <font color=red>DB Trigger:\nReq:pend detected\n/Transmit invoice Act:pend
aPend -[#blue]-> aVoid : <font color=blue>Peer:\nReceive refusal\n/Act:void; Notify user
aVoid -[#green]-> aDraftPend : <font color=green>User:\nModifies chit\nRequests draft
aPend -[#blue]-> aGood : <font color=blue>Peer:\nReceive acceptance\n/Act:good; Notify user

lPend -up[#green]-> lPendVoid : <font color=green>User:\nRequests to decline
lPendVoid -[#red]-> lVoid : <font color=red>DB Trigger:\nReq:void detected\n/Transmit refusal Act:void
lVoid -[#blue]-> lPend : <font color=blue>Peer:\nReceive modified invoice\n[Valid signature]\n/Act:pend; Notify user

lPend -[#green]-> lPendGood : <font color=green>User:\nSigns chit
lPendGood -[#red]-> lGood : <font color=red>DB Trigger:\nReq:good detected\n/Transmit acceptance Act:good

good - -> linked : [When consensus reached]

[*] -right-> liftPend : System proposes\nor agrees to lift
liftPend -right-> liftVoid : Lift fails
liftPend - -> liftGood : Lift committed

@enduml

PlantUML version 1.2022.7(Mon Aug 22 11:01:30 MDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>